<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revelo - Event Listings</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Nunito -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Custom styles to extend Tailwind */
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            /* Added padding to prevent content from touching screen edges on mobile */
            padding-top: 1rem;
            padding-bottom: 3rem;
        }
        /* Custom color palette inspired by the logo */
        .revelo-blue { color: #213c63; }
        .revelo-orange { color: #f58220; }
        .bg-revelo-blue { background-color: #213c63; }
        .bg-revelo-orange { background-color: #f58220; }
        .border-revelo-orange { border-color: #f58220; }

        /* Styling for the details/summary accordion */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details[open] > summary svg {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Main container with a max-width for larger screens -->
    <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden">

        <!-- Header Section with Search and Filters -->
        <header class="p-6">
            <h1 class="text-3xl font-extrabold revelo-blue mb-4">Find your next event</h1>
            
            <!-- Search Bar -->
            <div class="relative">
                <input type="text" placeholder="Search by name, artist, city..." class="w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-revelo-orange">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
            </div>

            <!-- Expandable Filters -->
            <details class="bg-gray-50 border rounded-lg mt-4">
                <summary class="p-4 font-semibold revelo-blue cursor-pointer flex justify-between items-center">
                    Filters
                    <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </summary>
                <div class="p-4 border-t border-gray-200 flex flex-wrap gap-2">
                    <button class="flex items-center bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition duration-300">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0zM15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        Location
                    </button>
                    <button class="flex items-center bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition duration-300">
                         <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728m-9.9-2.829a1.5 1.5 0 100-2.122 1.5 1.5 0 000 2.122zM12 6v.01M12 18v.01"></path></svg>
                        Style
                    </button>
                     <button class="flex items-center bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-full hover:bg-gray-300 transition duration-300">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        Dates
                    </button>
                </div>
            </details>
        </header>

        <!-- Main Content: Event Listings -->
        <main class="bg-gray-50 p-6">
            <!-- Order Picker -->
            <div class="flex justify-end items-center mb-4">
                <label for="order-picker" class="text-sm font-semibold text-gray-600 mr-2">Order by:</label>
                <select id="order-picker" class="border border-gray-300 rounded-md p-1 text-sm focus:outline-none focus:ring-1 focus:ring-revelo-orange">
                    <option value="relevance">Relevance</option>
                    <option value="date">Dates</option>
                    <option value="alphabetical">Alphabetical</option>
                    <option value="rating">Rating</option>
                </select>
            </div>

            <!-- Event Grid Container -->
            <div id="event-grid" class="space-y-4">
                <!-- Event cards will be dynamically sorted and placed here by JavaScript -->
            </div>
        </main>
    </div>

    <!-- Event Card Template (hidden) -->
    <template id="event-card-template">
        <div class="event-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 relative">
            <div class="tag-container absolute top-2 right-2"></div>
            <img class="w-full h-40 object-cover">
            <div class="p-4">
                <h4 class="font-bold text-md revelo-blue truncate"></h4>
                <p class="text-sm text-gray-500"></p>
                <div class="rating-container flex items-center mt-1"></div>
            </div>
        </div>
    </template>

    <script>
        // --- Mock Data ---
        const eventsData = [
            { id: 1, name: 'Sensuality & Essentiality', date: '2025-11-01', location: 'Barcelona', rating: 4.8, isFeatured: true, isTrending: true, relevance: 1, poster: 'https://goandance-media-cache-prod.s3.eu-central-1.amazonaws.com/poster_full/event/poster/2025/05/23/6830eaeb459d1543987602.jpg' },
            { id: 2, name: 'Madrid Bachata Masters', date: '2025-10-17', location: 'Madrid', rating: 4.9, isFeatured: true, isTrending: false, relevance: 1, poster: 'https://placehold.co/600x400/f58220/ffffff?text=Featured' },
            { id: 3, name: 'Valencia Salsa Summit', date: '2026-01-20', location: 'Valencia', rating: 4.7, isFeatured: true, isTrending: false, relevance: 1, poster: 'https://placehold.co/600x400/f58220/ffffff?text=Featured' },
            { id: 4, name: 'BCN Bachata Congress', date: '2025-10-10', location: 'Barcelona', rating: 4.6, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 5, name: 'Seville Kizomba Immersion', date: '2025-11-20', location: 'Seville', rating: 4.8, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 6, name: 'Zaragoza Dance Fest', date: '2025-09-28', location: 'Zaragoza', rating: 4.5, isFeatured: false, isTrending: true, relevance: 2, poster: 'https://placehold.co/600x400/213c63/ffffff?text=Trending' },
            { id: 7, name: 'Salsa Spring Fest', date: '2025-09-05', location: 'Madrid', rating: 4.2, isFeatured: false, isTrending: false, relevance: 3, poster: 'https://placehold.co/600x400/cccccc/ffffff?text=Event' },
            { id: 8, name: 'Kizomba Connection', date: '2025-09-19', location: 'Valencia', rating: 4.4, isFeatured: false, isTrending: false, relevance: 3, poster: 'https://placehold.co/600x400/cccccc/ffffff?text=Event' },
        ];

        const orderPicker = document.getElementById('order-picker');
        const eventGrid = document.getElementById('event-grid');
        const cardTemplate = document.getElementById('event-card-template');

        // --- Functions ---

        /**
         * Creates a star rating element.
         * @param {number} rating - The rating value (e.g., 4.8).
         * @returns {string} - The HTML string for the star icons.
         */
        function createStarRating(rating) {
            let starsHtml = '';
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            for (let i = 0; i < 5; i++) {
                if (i < fullStars) {
                    starsHtml += `<svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>`;
                } else if (i === fullStars && halfStar) {
                    starsHtml += `<svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292zM10 12.956L12.245 14.5l-.59-2.734 2.09-1.85-2.81-.24L10 7.231V12.956z"></path></svg>`;
                } else {
                    starsHtml += `<svg class="w-4 h-4 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>`;
                }
            }
            return starsHtml;
        }

        /**
         * Renders the event cards based on the provided sorted data.
         * @param {Array} sortedEvents - The array of event objects to render.
         */
        function renderEvents(sortedEvents) {
            eventGrid.innerHTML = ''; // Clear existing cards
            
            const createSection = (title, events, isOpen = false) => {
                if (events.length === 0) return;

                const details = document.createElement('details');
                if (isOpen) details.setAttribute('open', '');

                const summary = document.createElement('summary');
                summary.className = 'text-xl font-bold revelo-blue mb-3 cursor-pointer flex justify-between items-center';
                summary.innerHTML = `
                    ${title}
                    <svg class="w-5 h-5 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                `;
                
                const grid = document.createElement('div');
                grid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2';
                
                events.forEach(eventData => {
                    const card = cardTemplate.content.cloneNode(true).querySelector('.event-card');
                    card.querySelector('img').src = eventData.poster;
                    card.querySelector('img').alt = `Poster for ${eventData.name}`;
                    card.querySelector('h4').textContent = eventData.name;
                    card.querySelector('p').textContent = `${new Date(eventData.date).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}, ${new Date(eventData.date).getFullYear()} | ${eventData.location}`;
                    card.querySelector('.rating-container').innerHTML = createStarRating(eventData.rating);

                    if (eventData.isFeatured) {
                        card.querySelector('.tag-container').innerHTML = `<div class="bg-revelo-orange text-white text-xs font-bold px-2 py-1 rounded-md">FEATURED</div>`;
                    } else if (eventData.isTrending) {
                         card.querySelector('.tag-container').innerHTML = `<div class="bg-revelo-blue text-white text-xs font-bold px-2 py-1 rounded-md">TRENDING</div>`;
                    }

                    grid.appendChild(card);
                });
                
                details.appendChild(summary);
                details.appendChild(grid);
                eventGrid.appendChild(details);
            };

            if (orderPicker.value === 'relevance') {
                createSection('Featured', sortedEvents.filter(e => e.isFeatured), true); // Open by default
                createSection('Trending', sortedEvents.filter(e => e.isTrending && !e.isFeatured));
                createSection('Upcoming', sortedEvents.filter(e => !e.isFeatured && !e.isTrending));
            } else {
                createSection('Events', sortedEvents, true); // Open by default
            }
        }

        /**
         * Sorts and re-renders events based on the selected order.
         */
        function sortAndRender() {
            const sortBy = orderPicker.value;
            let sortedEvents = [...eventsData];

            switch (sortBy) {
                case 'relevance':
                    sortedEvents.sort((a, b) => a.relevance - b.relevance || new Date(a.date) - new Date(b.date) || a.name.localeCompare(b.name));
                    break;
                case 'date':
                    sortedEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
                    break;
                case 'alphabetical':
                    sortedEvents.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'rating':
                    sortedEvents.sort((a, b) => b.rating - a.rating);
                    break;
            }
            renderEvents(sortedEvents);
        }

        // --- Initial Load and Event Listeners ---
        orderPicker.addEventListener('change', sortAndRender);
        document.addEventListener('DOMContentLoaded', sortAndRender);

    </script>
</body>
</html>


