<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revelo - Gallery</title>
    
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Nunito -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Custom styles to extend Tailwind */
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            /* Added padding to prevent content from touching screen edges on mobile */
            padding-top: 1rem;
            padding-bottom: 3rem;
        }
        /* Custom color palette inspired by the logo */
        .revelo-blue { color: #213c63; }
        .revelo-orange { color: #f58220; }
        .bg-revelo-blue { background-color: #213c63; }
        .bg-revelo-orange { background-color: #f58220; }
        .border-revelo-orange { border-color: #f58220; }

        /* Custom scrollbar styles for horizontal lists */
        .horizontal-scroll {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .horizontal-scroll::-webkit-scrollbar {
            display: none; /* Chrome, Safari, and Opera */
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <!-- Main container with a max-width for larger screens -->
    <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden">

        <!-- Header Section -->
        <header class="p-6">
            <div class="flex items-center">
                <img src="https://goandance-media-cache-prod.s3.eu-central-1.amazonaws.com/square_preview_700/organizer/profile/2019/12/20/68067775d3164196627518.png" alt="Organizer Avatar" class="w-12 h-12 rounded-full object-cover shadow-md">
                <div class="ml-4">
                    <p class="text-sm text-gray-500">Galleries by</p>
                    <h1 class="text-2xl font-extrabold revelo-blue">Bachata Sensual Events</h1>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="p-6 bg-gray-50">
            <!-- Breadcrumb Navigation -->
            <nav id="breadcrumb-nav" class="mb-2 text-sm text-gray-500"></nav>
            
            <!-- Collaborators Display -->
            <div id="collaborators-display" class="mb-4 flex items-center space-x-4">
                <!-- Collaborator avatars will be dynamically inserted here -->
            </div>


            <!-- Gallery Levels Container -->
            <div id="gallery-container">
                <!-- Level 0: Main Event Galleries -->
                <div id="level-0" class="gallery-level">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <!-- Card 1 (Functional) -->
                        <div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-200">
                            <div class="relative">
                                <img src="https://goandance-media-cache-prod.s3.eu-central-1.amazonaws.com/poster_full/event/poster/2025/05/23/6830eaeb459d1543987602.jpg" alt="Event Poster" class="w-full h-40 object-cover cursor-pointer" onclick="navigateTo(1, 'Sensuality & Essentiality')">
                                <div class="absolute top-2 right-2 flex space-x-1">
                                    <button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg></button>
                                    <button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button>
                                </div>
                            </div>
                            <div class="p-4 cursor-pointer" onclick="navigateTo(1, 'Sensuality & Essentiality')"><h4 class="font-bold text-md revelo-blue truncate">Sensuality & Essentiality</h4><p class="text-sm text-gray-500">Nov 1-2, 2025</p></div>
                        </div>
                        <!-- Card 2 (Placeholder) -->
                        <div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-200"><div class="relative"><img src="https://placehold.co/600x400/cccccc/ffffff?text=Past+Event" alt="Event Poster" class="w-full h-40 object-cover"><div class="absolute top-2 right-2 flex space-x-1"><button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg></button><button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div></div><div class="p-4"><h4 class="font-bold text-md revelo-blue truncate">Barcelona Summer Fest</h4><p class="text-sm text-gray-500">Jul 15-17, 2024</p></div></div>
                        <!-- Card 3 (Placeholder) -->
                        <div class="bg-white rounded-lg shadow-md overflow-hidden border border-gray-200"><div class="relative"><img src="https://placehold.co/600x400/cccccc/ffffff?text=Past+Event" alt="Event Poster" class="w-full h-40 object-cover"><div class="absolute top-2 right-2 flex space-x-1"><button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg></button><button class="p-1.5 bg-white/80 rounded-full text-gray-600 hover:text-revelo-orange"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div></div><div class="p-4"><h4 class="font-bold text-md revelo-blue truncate">Winter Bachata Gala</h4><p class="text-sm text-gray-500">Jan 20-22, 2024</p></div></div>
                    </div>
                </div>
                <!-- Level 1: Day 1 / Day 2 -->
                <div id="level-1" class="gallery-level hidden">
                    <button class="w-full mb-6 bg-revelo-orange text-white font-bold py-2 px-4 rounded-lg shadow-md hover:bg-orange-600 transition duration-300 flex items-center justify-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>Follow this gallery</button>
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between cursor-pointer" onclick="navigateTo(2, 'Saturday 01-Nov')"><div><img src="https://placehold.co/80x80/213c63/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg revelo-blue inline-block">Saturday 01-Nov</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between"><div><img src="https://placehold.co/80x80/cccccc/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg text-gray-500 inline-block">Sunday 02-Nov</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                    </div>
                </div>
                <!-- Level 2: Photos / Videos -->
                <div id="level-2" class="gallery-level hidden">
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between cursor-pointer" onclick="navigateTo(3, 'Photos')"><div><img src="https://placehold.co/80x80/213c63/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg revelo-blue inline-block">Photos</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between"><div><img src="https://placehold.co/80x80/cccccc/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg text-gray-500 inline-block">Videos</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                    </div>
                </div>
                <!-- Level 3: Photo Categories -->
                <div id="level-3" class="gallery-level hidden">
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between cursor-pointer" onclick="navigateTo(4, 'Workshops')"><div><img src="https://placehold.co/80x80/213c63/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg revelo-blue inline-block">Workshops</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between"><div><img src="https://placehold.co/80x80/cccccc/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg text-gray-500 inline-block">Jack & Jill</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between"><div><img src="https://placehold.co/80x80/cccccc/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg text-gray-500 inline-block">Shows</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                        <div class="bg-white p-4 rounded-lg shadow border flex items-center justify-between"><div><img src="https://placehold.co/80x80/cccccc/ffffff?text=Folder" class="w-16 h-16 rounded-lg mr-4 inline-block"><h3 class="font-bold text-lg text-gray-500 inline-block">Social</h3></div><button class="p-1.5 rounded-full text-gray-600 hover:bg-gray-200"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button></div>
                    </div>
                </div>
                <!-- Level 4: Actual Gallery -->
                <div id="level-4" class="gallery-level hidden">
                    <div style="column-count: 2; column-gap: 1rem;">
                        <img src="https://placehold.co/600x800/f58220/ffffff?text=Photo+1" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x600/213c63/ffffff?text=Photo+2" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x900/f58220/ffffff?text=Photo+3" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x700/213c63/ffffff?text=Photo+4" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x850/f58220/ffffff?text=Photo+5" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x650/213c63/ffffff?text=Photo+6" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x750/f58220/ffffff?text=Photo+7" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x950/213c63/ffffff?text=Photo+8" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x550/f58220/ffffff?text=Photo+9" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                        <img src="https://placehold.co/600x800/213c63/ffffff?text=Photo+10" class="rounded-lg shadow-md w-full mb-4 break-inside-avoid cursor-pointer" onclick="openMediaModal(this)">
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Media Modal -->
    <div id="media-modal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 hidden z-50">
        <div class="relative w-full h-full">
            <div class="absolute top-0 left-0 m-4 flex space-x-4 z-20">
                <button class="text-white hover:text-revelo-orange transition-colors"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg></button>
                <button class="text-white hover:text-revelo-orange transition-colors"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg></button>
                <button class="text-white hover:text-revelo-orange transition-colors"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12s-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.368a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg></button>
            </div>
            <button id="close-media-modal" class="absolute top-0 right-0 m-4 text-white text-4xl leading-none z-20">×</button>
            <button id="prev-media-btn" class="absolute left-0 top-1/2 -translate-y-1/2 m-4 text-white text-4xl z-20"><</button>
            <button id="next-media-btn" class="absolute right-0 top-1/2 -translate-y-1/2 m-4 text-white text-4xl z-20">></button>
            <div class="w-full h-full flex items-center justify-center">
                <img id="modal-image" src="" class="max-w-full max-h-[90vh] object-contain">
            </div>
        </div>
    </div>

    <script>
        const galleryContainer = document.getElementById('gallery-container');
        const breadcrumbNav = document.getElementById('breadcrumb-nav');
        const collaboratorsDisplay = document.getElementById('collaborators-display');
        let breadcrumbTrail = [{ name: 'Galleries', level: 0 }];

        const collaboratorsByLevel = {
            1: [{ name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' }],
            2: [{ name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' }],
            3: [{ name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' }],
            4: [
                { name: 'AMedia', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=A' },
                { name: 'Lutty Moreira', avatar: 'https://placehold.co/80x80/f58220/ffffff?text=LM' }
            ]
        };

        function updateCollaborators(level) {
            collaboratorsDisplay.innerHTML = '';
            const collaborators = collaboratorsByLevel[level] || [];
            if (collaborators.length > 0) {
                const title = document.createElement('span');
                title.className = 'text-sm font-semibold text-gray-600';
                title.textContent = collaborators.length > 1 ? 'Creators:' : 'Creator:';
                collaboratorsDisplay.appendChild(title);

                collaborators.forEach(c => {
                    const avatarLink = document.createElement('a');
                    avatarLink.href = "#";
                    avatarLink.className = "flex items-center space-x-2 bg-white px-2 py-1 rounded-full border shadow-sm hover:shadow-md transition-shadow";
                    avatarLink.innerHTML = `<img src="${c.avatar}" class="w-6 h-6 rounded-full"><span class="text-sm font-semibold revelo-blue">${c.name}</span>`;
                    collaboratorsDisplay.appendChild(avatarLink);
                });
            }
        }

        function updateBreadcrumbs() {
            breadcrumbNav.innerHTML = '';
            breadcrumbTrail.forEach((crumb, index) => {
                const isLast = index === breadcrumbTrail.length - 1;
                const crumbEl = document.createElement(isLast ? 'span' : 'a');
                crumbEl.textContent = crumb.name;
                crumbEl.className = isLast ? 'font-semibold text-gray-800' : 'hover:underline cursor-pointer';
                if (!isLast) {
                    crumbEl.onclick = () => navigateTo(crumb.level, crumb.name, true, index);
                }
                breadcrumbNav.appendChild(crumbEl);
                if (!isLast) {
                    breadcrumbNav.append(' > ');
                }
            });
        }

        function navigateTo(level, name, isBreadcrumbClick = false, breadcrumbIndex = -1) {
            // Hide all levels
            galleryContainer.querySelectorAll('.gallery-level').forEach(el => el.classList.add('hidden'));
            
            // Show target level
            const targetLevel = document.getElementById(`level-${level}`);
            if (targetLevel) {
                targetLevel.classList.remove('hidden');
            }

            // Update breadcrumb
            if (isBreadcrumbClick) {
                breadcrumbTrail = breadcrumbTrail.slice(0, breadcrumbIndex + 1);
            } else {
                breadcrumbTrail.push({ name, level });
            }
            updateBreadcrumbs();
            updateCollaborators(level);
        }
        
        // --- Media Modal Interaction ---
        const mediaModal = document.getElementById('media-modal');
        const modalImage = document.getElementById('modal-image');
        const closeMediaModalBtn = document.getElementById('close-media-modal');
        const prevMediaBtn = document.getElementById('prev-media-btn');
        const nextMediaBtn = document.getElementById('next-media-btn');

        let currentGalleryImages = [];
        let currentImageIndex = 0;

        function openMediaModal(clickedImgElement) {
            const gallery = clickedImgElement.closest('div[style*="column-count"]');
            const images = gallery.querySelectorAll('img');
            currentGalleryImages = Array.from(images).map(img => img.src);
            currentImageIndex = currentGalleryImages.indexOf(clickedImgElement.src);
            
            updateModalImage();
            mediaModal.classList.remove('hidden');
        }
        
        function updateModalImage() {
            modalImage.src = currentGalleryImages[currentImageIndex];
        }

        function showNextImage() {
            currentImageIndex = (currentImageIndex + 1) % currentGalleryImages.length;
            updateModalImage();
        }

        function showPrevImage() {
            currentImageIndex = (currentImageIndex - 1 + currentGalleryImages.length) % currentGalleryImages.length;
            updateModalImage();
        }

        function closeMediaModal() {
            mediaModal.classList.add('hidden');
            modalImage.src = "";
        }

        closeMediaModalBtn.addEventListener('click', closeMediaModal);
        nextMediaBtn.addEventListener('click', showNextImage);
        prevMediaBtn.addEventListener('click', showPrevImage);
        
        mediaModal.addEventListener('click', (event) => {
            if (event.target === mediaModal) {
                closeMediaModal();
            }
        });
        
        // Swipe functionality
        let touchstartX = 0;
        let touchendX = 0;

        mediaModal.addEventListener('touchstart', e => {
            touchstartX = e.changedTouches[0].screenX;
        });

        mediaModal.addEventListener('touchend', e => {
            touchendX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            if (touchendX < touchstartX) { // Swiped left
                showNextImage();
            }
            if (touchendX > touchstartX) { // Swiped right
                showPrevImage();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateBreadcrumbs();
            updateCollaborators(0);
        });
    </script>
</body>
</html>


